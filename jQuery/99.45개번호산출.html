<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Count Down</title>
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script>
      var count = 3;
      function disp(num) {
        $("<img></img>")
          .attr({
            src: `../JS/ch07.DOM/img/${num}.svg`,
            width: 500,
            id: "lotto",
          })
          .css("margin", "30px")
          .appendTo($("#result"));
      }
      function hide() {
        $("#lotto").remove();
      }
      function getUniqueNumbers() {
        let numbers = [];
        while (numbers.length < 6) {
          let num = Math.ceil(Math.random() * 45);
          if (!numbers.includes(num)) {
            numbers.push(num);
          }
        }
        return numbers;
      }
      $(document).ready(() => {
        disp(count--);
        let si = setInterval(() => {
          hide();
          if (count != 0) disp(count--);
          else {
            let resultNumbers = getUniqueNumbers();
            $("<h3></h3>")
              .text(`결과는 ${resultNumbers.join(", ")} 입니다.`)
              .appendTo("#result");
          }
        }, 1000);
        setInterval(() => {
          clearInterval(si);
        }, 3020);
      });
    </script>
  </head>
  <body style="margin: 40px">
    <h1>3초 후에 결과 보여주기</h1>
    <hr />
    <div id="result"></div>
  </body>
</html>
